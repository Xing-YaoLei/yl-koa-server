import{g as e,a,e as l,d as t}from"./fleet.38d02fa8.js";import{u as o,_ as n,b as r}from"./usePagination.bd041eb4.js";import{r as d,_ as i,a as s,U as u,e as p,ad as c,o as m,f as g,h,w as f,ae as v,j as _,V as y,i as b,ag as C,B as V,ah as w,ai as z,x as S,E as k,J as x,K as D}from"./index.7c4629cc.js";const P={formItems:[{field:"name",type:"input",label:"车队名称:",placeholder:"请输入公司名称"},{field:"contact",type:"input",label:"车队联系人:",placeholder:"请输入车队联系人"},{field:"phone",type:"input",label:"车队电话:",placeholder:"请输入公司名称"}]},U=d([{prop:"name",label:"车队名称",isShow:!0},{prop:"contact",label:"车队联系人",isShow:!0},{prop:"phone",label:"联系电话",isShow:!0},{prop:"createDateTime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),j={class:"app-container"},q={class:"pager-wrapper"},F=(e=>(x("data-v-33c1d178"),e=e(),D(),e))((()=>S("div",{class:"addFleetTitle"},"新增车队",-1))),B=i({__name:"index",setup(i){var x;const D={name:[{required:!0,message:"请输入车队名称",trigger:"change"}],contact:[{required:!0,message:"请输入联系人",trigger:"change"}],phone:[{required:!0,message:"请输入正确手机号",trigger:"change",pattern:/^1[3456789]\d{9}$/}]},B=s(),I=s(!1),{paginationData:L,handleCurrentChange:N,handleSizeChange:O}=o(),T=s(),E=s("add"),H=d({}),J=s(!1),K=s([]),R=null!=(x=null==P?void 0:P.formItems)?x:[],$={};R.map((e=>{$[e.field]=""})),u((()=>{A({})}));const A=async a=>{I.value=!0,await e({...a,pageNum:L.currentPage,pageSize:L.pageSize}).then((e=>{I.value=!1;const{pageNum:a,total:l,data:t}=e.rspData;L.currentPage=a,L.total=l,K.value=t}))},G=s($),M=()=>{var e;null==(e=T.value)||e.resetForm(),A()},Q=()=>{A(G.value)};return(e,o)=>{const d=p("el-button"),i=p("el-pagination"),s=p("el-card"),u=p("el-input"),x=p("el-form-item"),R=p("el-form"),$=p("el-dialog"),W=c("loading");return m(),g("div",j,[h(n,v(_(P),{modelValue:G.value,"onUpdate:modelValue":o[0]||(o[0]=e=>G.value=e),ref_key:"editForm",ref:T}),{lastBtn:f((()=>[h(d,{type:"primary",icon:_(C),onClick:Q},{default:f((()=>[V("查询")])),_:1},8,["icon"]),h(d,{icon:_(w),onClick:M},{default:f((()=>[V("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),y((m(),b(s,null,{default:f((()=>[h(r,{tableData:K.value,columnList:_(U)},{OtherHandle:f((()=>[h(d,{type:"primary",icon:_(z),onClick:o[1]||(o[1]=e=>J.value=!0)},{default:f((()=>[V("新增")])),_:1},8,["icon"])])),handle:f((e=>[h(d,{type:"primary",text:"",size:"small",onClick:a=>{return l=e.row,E.value="edit",Object.assign(H,l),void(J.value=!0);var l}},{default:f((()=>[V("编辑")])),_:2},1032,["onClick"]),h(d,{type:"danger",text:"",size:"small",onClick:a=>{return l=e.row,void t(l.id).then((e=>{1==e.rspCode&&k.success("删除成功")}));var l}},{default:f((()=>[V("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),S("div",q,[h(i,{layout:_(L).layout,"page-sizes":_(L).pageSizes,total:_(L).total,"page-size":_(L).pageSize,currentPage:_(L).currentPage,onSizeChange:_(O),onCurrentChange:_(N)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[W,I.value]]),h($,{modelValue:J.value,"onUpdate:modelValue":o[7]||(o[7]=e=>J.value=e),width:"30%","show-close":!1},{header:f((()=>[F])),footer:f((()=>[h(d,{type:"default",onClick:o[5]||(o[5]=e=>J.value=!1)},{default:f((()=>[V("取消")])),_:1}),h(d,{type:"primary",onClick:o[6]||(o[6]=e=>(async e=>{e&&await e.validate(((e,t)=>{e&&("add"==E.value?a(H).then((e=>{J.value=!1,A()})):l(H).then((e=>{})))}))})(B.value))},{default:f((()=>[V("保存")])),_:1})])),default:f((()=>[h(R,{"label-width":"140px",model:H,ref_key:"addFleetFormRef",ref:B,rules:D,class:"fleetDialog"},{default:f((()=>[h(x,{required:"",prop:"name",label:"车队名称:"},{default:f((()=>[h(u,{modelValue:H.name,"onUpdate:modelValue":o[2]||(o[2]=e=>H.name=e),placeholder:"请输入车队名称"},null,8,["modelValue"])])),_:1}),h(x,{required:"",prop:"contact",label:"车队联系人:"},{default:f((()=>[h(u,{modelValue:H.contact,"onUpdate:modelValue":o[3]||(o[3]=e=>H.contact=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),h(x,{prop:"phone",label:"车队电话:"},{default:f((()=>[h(u,{modelValue:H.phone,"onUpdate:modelValue":o[4]||(o[4]=e=>H.phone=e),placeholder:"请输入车队电话"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-33c1d178"]]);export{B as default};
