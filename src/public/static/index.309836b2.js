import{r as e,_ as a,U as l,l as t,a as n,m as o,e as r,ad as s,o as i,f as u,V as p,i as d,w as c,ae as m,j as g,h,B as v,ag as f,ah as y,ai as C,x as z,E as b}from"./index.7c4629cc.js";import{a as _,d as S}from"./roles.7827c3e8.js";import{u as w,_ as k,b as P}from"./usePagination.bd041eb4.js";const x={formItems:[{field:"name",label:"角色名称:",placeholder:"请输入角色名称",type:"input"}]},D=e([{prop:"name",label:"角色名称",isShow:!0},{prop:"description",label:"角色描述",isShow:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),j={class:"app-container"},V={class:"pager-wrapper"},B=a({__name:"index",setup(e){var a;const{paginationData:B,handleCurrentChange:I,handleSizeChange:R}=w();l((()=>{$()}));const F=t(),L=n([]),N=n(!1),U=n(),q=null!=(a=null==x?void 0:x.formItems)?a:[],E={};q.map((e=>{E[e.field]=""}));const H=n(E),O=()=>{var e;null==(e=U.value)||e.resetForm(),$()},Q=()=>{$(H.value)},$=e=>{N.value=!0,_({...e,pageNumber:B.currentPage,pageSize:B.pageSize}).then((e=>{N.value=!1;const{pageNumber:a,total:l,fuzzyQuerySysRoles:t}=e.rspData;B.currentPage=a,B.total=l,L.value=t})).catch((e=>{e&&(N.value=!1)})).finally((()=>{N.value=!1}))};return o([()=>B.currentPage,()=>B.pageSize],$),(e,a)=>{const l=r("el-button"),t=r("el-pagination"),n=r("el-card"),o=s("loading");return i(),u("div",j,[p((i(),d(k,m(g(x),{modelValue:H.value,"onUpdate:modelValue":a[0]||(a[0]=e=>H.value=e),ref_key:"editForm",ref:U}),{lastBtn:c((()=>[h(l,{type:"primary",icon:g(f),onClick:Q},{default:c((()=>[v("查询")])),_:1},8,["icon"]),h(l,{icon:g(y),onClick:O},{default:c((()=>[v("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"])),[[o,N.value]]),p((i(),d(n,null,{default:c((()=>[h(P,{tableData:L.value,columnList:g(D)},{OtherHandle:c((()=>[h(l,{icon:g(C),type:"primary",onClick:a[1]||(a[1]=a=>e.$router.push({name:"addRole"}))},{default:c((()=>[v("新增")])),_:1},8,["icon"])])),handle:c((e=>[h(l,{type:"primary",text:"",size:"small",onClick:a=>{return l=e.row,void F.push({name:"addRole",query:{id:l.id,name:l.name,pid:l.pid,description:l.description}});var l}},{default:c((()=>[v("编辑")])),_:2},1032,["onClick"]),h(l,{type:"danger",text:"",size:"small",onClick:a=>{return l=e.row,void S({id:l.id}).then((e=>{1==e.rspCode&&(b.success("删除成功"),$())}));var l}},{default:c((()=>[v("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),z("div",V,[h(t,{layout:g(B).layout,"page-sizes":g(B).pageSizes,total:g(B).total,"page-size":g(B).pageSize,currentPage:g(B).currentPage,onSizeChange:g(R),onCurrentChange:g(I)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[o,N.value]])])}}},[["__scopeId","data-v-2322b937"]]);export{B as default};
