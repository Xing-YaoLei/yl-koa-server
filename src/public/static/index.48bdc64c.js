import{u as e,_ as a,b as l}from"./usePagination.bd041eb4.js";import{r as o,_ as t,a as n,m as r,U as u,e as s,o as i,f as d,x as p,h as c,w as m,ae as v,j as g,ag as f,B as h,ah as _,ai as b,t as y,az as C,E as S}from"./index.7c4629cc.js";import{f as k,a as z,e as w,b as V,d as P}from"./vehicle.c7c1d584.js";const x={formItems:[{field:"name",label:"品牌:",placeholder:"请选择品牌",type:"select",options:[]}]},D=o([{prop:"id",label:"序号",isShow:!0},{prop:"logo",label:"品牌logo",isShow:!0},{prop:"name",label:"品牌名称",isShow:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),B={class:"app-container"},U={class:"pager-wrapper"},j={class:"header"},I=["id"],L={class:"dialog-footer"},F=t({__name:"index",setup(t){var F;const{paginationData:N,handleCurrentChange:q,handleSizeChange:E}=e(),H=n(),O=null!=(F=null==x?void 0:x.formItems)?F:[],R={};O.map((e=>{R[e.field]=""}));const T=n(R),A=n(null),G=n(null),J=()=>{var e;null==(e=H.value)||e.resetForm(),K()},K=()=>{N.currentPage=1,$()},M=n([]),Q=n(null),W=n(!1),X=n("right"),Y=n({name:"",logo:""}),Z=(e,a)=>{},$=()=>{z({...T.value,pageNum:N.currentPage,pageSize:N.pageSize}).then((e=>{const{pageNum:a,total:l,list:o}=e.rspData;N.currentPage=a,N.total=l,M.value=o}))},ee=o({name:[{required:!0,message:"请输入品牌名称",trigger:"blur"},{min:1,max:50,message:"长度应该在1-50之间",trigger:"blur"}]}),ae=()=>{Y.value={},W.value=!0,Q.value=!1};return r([()=>N.currentPage,()=>N.pageSize],$,{immediate:!0}),u((()=>{k().then((e=>{const a=null==e?void 0:e.rspData.map((e=>({value:e.id,label:e.name})));O.filter((e=>"name"===e.field))[0].options=a}))})),(e,o)=>{const t=s("el-button"),n=s("el-popconfirm"),r=s("el-pagination"),u=s("el-card"),k=s("el-input"),z=s("el-form-item"),F=s("el-icon"),O=s("el-upload"),R=s("el-form"),$=s("el-dialog");return i(),d("div",B,[p("div",null,[c(a,v(g(x),{modelValue:T.value,"onUpdate:modelValue":o[0]||(o[0]=e=>T.value=e),ref_key:"editForm",ref:H}),{lastBtn:m((()=>[c(t,{type:"primary",icon:g(f),onClick:K},{default:m((()=>[h("查询")])),_:1},8,["icon"]),c(t,{icon:g(_),onClick:J},{default:m((()=>[h("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),c(u,null,{default:m((()=>[c(l,{tableData:M.value,columnList:g(D)},{OtherHandle:m((()=>[c(t,{type:"primary",icon:g(b),onClick:ae},{default:m((()=>[h("新增")])),_:1},8,["icon"])])),handle:m((e=>[c(t,{onClick:a=>(e=>{const{name:a,logo:l,id:o}=e.row;Q.value=!0,G.value=o,W.value=!0,Y.value={name:a,logo:l}})(e),link:"",type:"primary"},{default:m((()=>[h("编辑 ")])),_:2},1032,["onClick"]),c(n,{title:"确定删除吗？",onConfirm:a=>(e=>{P({id:e.row.id}).then((e=>{"1"===e.rspCode&&(K(),S({type:"success",message:"删除成功"}))}))})(e)},{reference:m((()=>[c(t,{type:"danger",link:""},{default:m((()=>[h("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1},8,["tableData","columnList"]),p("div",U,[c(r,{background:"",layout:g(N).layout,"page-sizes":g(N).pageSizes,total:g(N).total,"page-size":g(N).pageSize,currentPage:g(N).currentPage,onSizeChange:g(E),onCurrentChange:g(q)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})]),c($,{modelValue:W.value,"onUpdate:modelValue":o[5]||(o[5]=e=>W.value=e),"show-close":!1},{header:m((({titleId:e})=>[p("div",j,[p("div",{id:e,class:"CreateBranchTitle"},y(Q.value?"编辑品牌":"创建品牌"),9,I)])])),footer:m((()=>[p("span",L,[c(t,{onClick:o[3]||(o[3]=e=>W.value=!1)},{default:m((()=>[h("取消")])),_:1}),c(t,{type:"primary",onClick:o[4]||(o[4]=e=>{return Q.value?void(null==(a=A.value)||a.validate().then((e=>{if(!e)return!1;Y.value.id=G.value,w(Y.value).then((e=>{1==e.rspCode&&(W.value=!1,K(),S({type:"success",message:"编辑品牌成功"})),W.value=!1,K()}))}))):(()=>{var e;null==(e=A.value)||e.validate().then((e=>{if(!e)return!1;V(Y.value).then((e=>{1==e.rspCode&&(W.value=!1,K(),S({type:"success",message:"添加品牌成功"}))}))}))})();var a})},{default:m((()=>[h(" 保存 ")])),_:1})])])),default:m((()=>[c(R,{"label-position":X.value,class:"createBranch",model:Y.value,rules:ee,ref_key:"formRef",ref:A},{default:m((()=>[c(z,{label:"品牌名称:",prop:"name"},{default:m((()=>[c(k,{style:{width:"259px"},modelValue:Y.value.name,"onUpdate:modelValue":o[1]||(o[1]=e=>Y.value.name=e)},null,8,["modelValue"])])),_:1}),c(z,{label:"品牌Logo:"},{default:m((()=>[c(O,{modelValue:Y.value.logo,"onUpdate:modelValue":o[2]||(o[2]=e=>Y.value.logo=e),action:"https://run.mocky.io/v3/9d059bf9-4660-45f2-925d-ce80ad6c4d15","list-type":"picture-card","on-remove":Z},{default:m((()=>[c(F,null,{default:m((()=>[c(g(C))])),_:1})])),_:1},8,["modelValue"])])),_:1})])),_:1},8,["label-position","model","rules"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-91d31193"]]);export{F as default};
