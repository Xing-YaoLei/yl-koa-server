import{u as e,_ as a,b as l}from"./usePagination.bd041eb4.js";import{f as t,d as o,a as u}from"./ownership.73f956ca.js";import{r as n,a as s,U as r,m as i,e as d,ad as p,o as m,f as c,h as v,w as f,ae as g,j as h,V as y,i as b,ag as _,B as V,ah as C,ai as w,x as S,t as z,al as k,E as x}from"./index.7c4629cc.js";const U={formItems:[{field:"name",label:"网点名称:",placeholder:"请输入网点名称",type:"input"}]},P=n([{prop:"name",label:"网点名称",isShow:!0},{prop:"address",label:"网点地址",isShow:!0},{prop:"volume",label:"容积率",isShow:!0},{prop:"type",label:"取换车方式",isShow:!0,custom:!0},{prop:"createDateTime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),B={class:"app-container"},D={class:"pager-wrapper"},j={__name:"index",setup(n){var j;const F=s(!1),{paginationData:N,handleCurrentChange:O,handleSizeChange:T}=e(),I=s([]),J=s();r((()=>{}));const L=e=>{F.value=!0,t({...e,pageNum:N.currentPage,pageSize:N.pageSize}).then((e=>{const{pageNum:a,total:l,data:t}=e.rspData;N.currentPage=a,N.total=l,F.value=!1,I.value=t}))},E=s(),H=null!=(j=null==U?void 0:U.formItems)?j:[],R={};H.map((e=>{R[e.field]=""}));const W=s(R),$=()=>{var e,a;null==(e=E.value)||e.resetForm(),null==(a=J.value)||a.resetFields(),L()},q=()=>{L(W.value)},A=s(!1),G=s(!0),K=()=>{G.value=!0,A.value=!0,W.value={}},M=()=>{u(W.value).then((e=>{1==e.rspCode&&(A.value=!1,1==G.value?x({type:"success",message:"新增成功"}):x({type:"success",message:"编辑修改成功"}))})).finally((()=>{var e;null==(e=J.value)||e.resetFields()}))};return i([()=>N.currentPage,()=>N.pageSize],L,{immediate:!0}),(e,t)=>{const u=d("el-button"),n=d("el-pagination"),s=d("el-card"),r=d("el-input"),i=d("el-form-item"),j=d("el-option"),H=d("el-select"),R=d("el-form"),Q=d("el-dialog"),X=p("loading");return m(),c("div",B,[v(a,g(h(U),{modelValue:W.value,"onUpdate:modelValue":t[0]||(t[0]=e=>W.value=e),ref_key:"editForm",ref:E}),{lastBtn:f((()=>[v(u,{type:"primary",icon:h(_),onClick:q},{default:f((()=>[V("查询")])),_:1},8,["icon"]),v(u,{icon:h(C),onClick:$},{default:f((()=>[V("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),y((m(),b(s,null,{default:f((()=>[v(l,{tableData:I.value,columnList:h(P)},{OtherHandle:f((()=>[v(u,{type:"primary",icon:h(w),onClick:K},{default:f((()=>[V("新增")])),_:1},8,["icon"])])),type:f((e=>[S("div",null,z(e.row.type?"到店自取":"送车上门"),1)])),handle:f((e=>[v(u,{type:"primary",text:"",size:"small",onClick:a=>{return l=e.row,G.value=!1,W.value=JSON.parse(JSON.stringify(l)),void(A.value=!0);var l}},{default:f((()=>[V("编辑")])),_:2},1032,["onClick"]),v(u,{type:"danger",text:"",size:"small",onClick:a=>{return l=e.row,void k.confirm(`您确定要删除网点${l.name}`,"Warning",{confirmButtonText:"确认",cancelButtonText:"取消",type:"warning"}).then((()=>{o(l.id).then((e=>{1==e.rspCode?(L(),x({type:"success",message:"删除成功"})):x({type:"danger",message:"服务器超时"})})).catch((()=>{x({type:"info",message:"取消删除"})}))}));var l}},{default:f((()=>[V("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),S("div",D,[v(n,{layout:h(N).layout,"page-sizes":h(N).pageSizes,total:h(N).total,"page-size":h(N).pageSize,currentPage:h(N).currentPage,onSizeChange:h(T),onCurrentChange:h(O)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[X,F.value]]),v(Q,{modelValue:A.value,"onUpdate:modelValue":t[7]||(t[7]=e=>A.value=e),title:!0===G.value?"新增网点":"编辑网点",onClose:$,width:"30%"},{footer:f((()=>[v(u,{onClick:t[6]||(t[6]=e=>A.value=!1)},{default:f((()=>[V("取消")])),_:1}),v(u,{type:"primary",onClick:M},{default:f((()=>[V("确认")])),_:1})])),default:f((()=>[v(R,{ref_key:"formRef",ref:J,model:W.value,"label-width":"120px","label-position":"right",inline:!0},{default:f((()=>[v(i,{prop:"name",label:"网点名称:"},{default:f((()=>[v(r,{modelValue:W.value.name,"onUpdate:modelValue":t[1]||(t[1]=e=>W.value.name=e),placeholder:"请输入仓库地址"},null,8,["modelValue"])])),_:1}),v(i,{prop:"contact",label:"联系电话:"},{default:f((()=>[v(r,{modelValue:W.value.contact,"onUpdate:modelValue":t[2]||(t[2]=e=>W.value.contact=e),placeholder:"请输入联系电话"},null,8,["modelValue"])])),_:1}),v(i,{prop:"type",label:"取换车方式:"},{default:f((()=>[v(H,{style:{width:"175px"},modelValue:W.value.type,"onUpdate:modelValue":t[3]||(t[3]=e=>W.value.type=e),placeholder:"请选择仓库类型"},{default:f((()=>[v(j,{label:"送车上门",value:0}),v(j,{label:"到店自取",value:1})])),_:1},8,["modelValue"])])),_:1}),v(i,{prop:"volume",label:"网点容积:"},{default:f((()=>[v(r,{modelValue:W.value.volume,"onUpdate:modelValue":t[4]||(t[4]=e=>W.value.volume=e),placeholder:"请输入容积"},null,8,["modelValue"])])),_:1}),v(i,{prop:"address",label:"网点地址:"},{default:f((()=>[v(r,{modelValue:W.value.address,"onUpdate:modelValue":t[5]||(t[5]=e=>W.value.address=e),placeholder:"请输入仓库地址"},null,8,["modelValue"])])),_:1})])),_:1},8,["model"])])),_:1},8,["modelValue","title"])])}}};export{j as default};
