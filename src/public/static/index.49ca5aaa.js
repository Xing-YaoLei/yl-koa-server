import{u as e,_ as l,b as a}from"./usePagination.8703237d.js";import{r as o,_ as d,aA as r,P as p,a as t,U as i,aB as s,m as n,e as u,ad as c,o as m,f as h,h as b,w as v,ae as f,j as g,V as S,i as C,af as V,B as y,ag as _,ah as w,x as k,ac as x,F as I,n as T,aC as D,E as q,aD as z,ai as P,aE as R,C as U,J as B,K as N}from"./index.5c17e37b.js";const L=o({formItems:[{field:"model",label:"型号:",placeholder:"请选择型号",type:"cascader",options:[]},{field:"sn",type:"input",label:"SN:",placeholder:"请输入SN码"},{field:"sim",type:"input",label:"SIM卡号:",placeholder:"请输入SIM卡号"}]}),M=o([{prop:"modelList",label:"型号",isShow:!0},{prop:"sn",label:"SN",isShow:!0},{prop:"sim",label:"SIM卡号",isShow:!0},{prop:"bleSn",label:"BLE SN",isShow:!0},{prop:"productionTime",label:"出厂日期",isShow:!0},{prop:"iccid",label:"ICCID",isShow:!0},{prop:"createDateTime",label:"创建日期",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),E=o([{prop:"model",label:"类型:",isRequired:!0,placeholder:"请选择类型",options:[]},{prop:"sn",label:"SN:",isRequired:!0,placeholder:"请输入SN"},{prop:"port",label:"Port:",isRequired:!1,placeholder:"请输入Port"},{prop:"ip",label:"IP:",isRequired:!1,placeholder:"请输入IP"},{prop:"sim",label:"SIM卡号:",isRequired:!1,placeholder:"请输入SIM卡号"},{prop:"bleSn",label:"BLE SN:",isRequired:!0,placeholder:"请输入选择BLE SN"},{prop:"softwareVersion",label:"软件版本号:",isRequired:!1,placeholder:"请输入软件版本号"},{prop:"hardwareVersion",label:"硬件版本号:",isRequired:!1,placeholder:"请输入硬件版本号"},{prop:"productionTime",label:"出厂日期:",isRequired:!1,placeholder:"请选择日期",isDateTime:!0},{prop:"iccid",label:"ICCID:",isRequired:!0,placeholder:"请输入ICCID"},{prop:"isActive",label:"是否激活:",isRequired:!0,placeholder:"请选择",options:[{label:"已激活",value:1},{label:"未激活",value:0}]}]),j={class:"app-container"},H={class:"pager-wrapper"},Y=(e=>(B("data-v-b7f01c97"),e=e(),N(),e))((()=>k("div",{class:"addTboxHeader"},[k("div",{class:"addTboxHeaderTitle"},"添加TBOX")],-1))),F={class:"twoLine"},O={class:"addTboxDialogHandle"},A=d({__name:"index",setup(d){var B;const N=r(),{tboxModelList:A}=p(N),{paginationData:J,handleCurrentChange:K,handleSizeChange:W}=e(),X=t(!1),G=t("add"),Q=t([]),Z=o({}),$=t(!1),ee=t(),le=null!=(B=null==L?void 0:L.formItems)?B:[],ae={};le.map((e=>{ae[e.field]=""}));const oe=t(ae),de=()=>{var e;null==(e=ee.value)||e.resetForm(),pe()},re=()=>{if(oe.value.model){const{length:e,[e-1]:l}=oe.value.model;oe.value.model=l}pe(oe.value)};i((()=>{var e;N.getTboxModelList(),null==(e=null==L?void 0:L.formItems)||e.map((e=>{"model"==e.field&&(e.options=A)})),null==E||E.map((e=>{"model"==e.prop&&(e.options=A)})),pe()}));const pe=e=>{X.value=!0,s({...e,pageNum:J.currentPage,pageSize:J.pageSize}).then((e=>{if(1==e.rspCode){X.value=!1;const{pageNum:l,total:a,data:o}=e.rspData;J.currentPage=l,J.total=a,Q.value=o}}))},te=()=>{const{length:e,[e-1]:l}=Z.model;Z.model=l,"add"==G.value?D(Z).then((e=>{1==e.rspCode&&(q.success("新增Tbox成功"),pe())})):z(Z).then((e=>{1==e.rspCode&&(q.success("编辑Tbox信息成功"),pe())})),$.value=!1},ie=()=>{$.value=!0,G.value="add"};return n([()=>J.currentPage,()=>J.pageSize],pe),(e,o)=>{const d=u("el-button"),r=u("el-pagination"),p=u("el-card"),t=u("el-option"),i=u("el-select"),s=u("el-cascader"),n=u("el-date-picker"),D=u("el-input"),z=u("el-form-item"),B=u("el-form"),N=u("el-dialog"),A=c("loading");return m(),h("div",j,[b(l,f(g(L),{modelValue:oe.value,"onUpdate:modelValue":o[0]||(o[0]=e=>oe.value=e),ref_key:"editForm",ref:ee}),{lastBtn:v((()=>[b(d,{type:"primary",icon:g(V),onClick:re},{default:v((()=>[y("查询")])),_:1},8,["icon"]),b(d,{icon:g(_),onClick:de},{default:v((()=>[y("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),S((m(),C(p,null,{default:v((()=>[b(a,{tableData:Q.value,columnList:g(M)},{OtherHandle:v((()=>[b(d,{icon:g(w),type:"primary",onClick:ie},{default:v((()=>[y("新增")])),_:1},8,["icon"])])),handle:v((e=>[b(d,{type:"primary",text:"",size:"small",onClick:l=>{return a=e.row,$.value=!0,G.value="edit",void Object.assign(Z,a);var a}},{default:v((()=>[y("编辑")])),_:2},1032,["onClick"]),b(d,{type:"danger",text:"",size:"small",onClick:l=>{return a=e.row,void P.confirm("您确定要删除么","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{R({id:a.id}).then((e=>{1==e.rspCode&&(q.success("删除成功"),pe())}))}));var a}},{default:v((()=>[y("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),k("div",H,[b(r,{layout:g(J).layout,"page-sizes":g(J).pageSizes,total:g(J).total,"page-size":g(J).pageSize,currentPage:g(J).currentPage,onSizeChange:g(W),onCurrentChange:g(K)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[A,X.value]]),b(N,{center:"",modelValue:$.value,"onUpdate:modelValue":o[3]||(o[3]=e=>$.value=e),"show-close":!0},{header:v((({})=>[Y])),footer:v((()=>[k("div",O,[b(d,{type:"default",onClick:o[2]||(o[2]=e=>$.value=!1)},{default:v((()=>[y("取消")])),_:1}),b(d,{type:"primary",onClick:te},{default:v((()=>[y("保存")])),_:1})])])),default:v((()=>[b(B,{"label-width":"90px",modelValue:Z,"onUpdate:modelValue":o[1]||(o[1]=e=>x(Z)?Z.value=e:null)},{default:v((()=>[k("div",F,[(m(!0),h(I,null,T(g(E),(e=>(m(),C(z,{key:e.prop,label:e.label,required:e.isRequired},{default:v((()=>[e.options&&"model"!==e.prop?(m(),C(i,{key:0,modelValue:Z[e.prop],"onUpdate:modelValue":l=>Z[e.prop]=l,placeholder:e.placeholder},{default:v((()=>[(m(!0),h(I,null,T(e.options,(e=>(m(),C(t,{key:e.label,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):U("",!0),"model"==e.prop?(m(),C(s,{key:1,modelValue:Z[e.prop],"onUpdate:modelValue":l=>Z[e.prop]=l,options:e.options},null,8,["modelValue","onUpdate:modelValue","options"])):U("",!0),e.isDateTime?(m(),C(n,{key:2,modelValue:Z[e.prop],"onUpdate:modelValue":l=>Z[e.prop]=l,format:"YYYY/MM/DD","value-format":"x",type:"date",placeholder:"请选择日期"},null,8,["modelValue","onUpdate:modelValue"])):U("",!0),e.options||e.isDateTime?U("",!0):(m(),C(D,{key:3,modelValue:Z[e.prop],"onUpdate:modelValue":l=>Z[e.prop]=l,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])),_:2},1032,["label","required"])))),128))])])),_:1},8,["modelValue"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-b7f01c97"]]);export{A as default};
