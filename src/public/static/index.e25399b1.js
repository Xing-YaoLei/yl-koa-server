import{r as e,l as a,a as l,m as t,U as o,e as n,o as i,f as s,x as r,h as p,w as d,ae as u,j as c,at as m,af as g,B as h,ag as f,au as b,av as v,E as y}from"./index.5eef876b.js";import{u as C,_ as S,b as k}from"./usePagination.5462390c.js";import{f as _}from"./vehicle.8792bb69.js";const w={formItems:[{field:"brandId",label:"品牌:",placeholder:"请选择品牌",type:"select",options:[]},{field:"level",label:"级别:",placeholder:"请选择级别",type:"select",options:[]},{field:"modelName",label:"车型名称:",type:"input",placeholder:"请输入车型名称"}]},z=e([{prop:"id",label:"序号",isShow:!0},{prop:"modelName",label:"车型名称",isShow:!0},{prop:"level",label:"级别",isShow:!0},{prop:"model",label:"型号",isShow:!0},{prop:"marketTime",label:"上市时间",isShow:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),D={class:"app-container"},P={class:"pager-wrapper"},V={__name:"index",setup(e){var V;const{paginationData:j,handleCurrentChange:x,handleSizeChange:I}=C(),N=a(),B=l([]),M=l(),F=null!=(V=null==w?void 0:w.formItems)?V:[],L={};F.map((e=>{L[e.field]=""}));const U=l(L),q=()=>{var e;null==(e=M.value)||e.resetForm(),O()},E=()=>{O()},H=()=>{N.push({name:"addVehicleModel"})},O=()=>{b({...U.value,pageNum:j.currentPage,pageSize:j.pageSize}).then((e=>{const{pageNum:a,total:l,list:t}=e.rspData;j.currentPage=a,j.total=l,B.value=t}))};return t([()=>j.currentPage,()=>j.pageSize],O,{immediate:!0}),o((()=>{m().then((e=>{const a=null==e?void 0:e.rspData.map((e=>({value:e.id,label:e.name})));F.filter((e=>"level"===e.field))[0].options=a})),_().then((e=>{const a=null==e?void 0:e.rspData.map((e=>({value:e.id,label:e.name})));F.filter((e=>"brandId"===e.field))[0].options=a}))})),(e,a)=>{const l=n("el-button"),t=n("el-pagination"),o=n("el-card");return i(),s("div",D,[r("div",null,[p(S,u(c(w),{modelValue:U.value,"onUpdate:modelValue":a[0]||(a[0]=e=>U.value=e),ref_key:"editForm",ref:M}),{lastBtn:d((()=>[p(l,{type:"primary",icon:c(g),onClick:E},{default:d((()=>[h("查询")])),_:1},8,["icon"]),p(l,{icon:c(f),onClick:q},{default:d((()=>[h("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),p(o,null,{default:d((()=>[p(k,{tableData:B.value,columnList:c(z)},{OtherHandle:d((()=>[p(l,{type:"primary",onClick:H},{default:d((()=>[h("新增")])),_:1})])),handle:d((e=>[p(l,{link:"",type:"primary"},{default:d((()=>[h("查看")])),_:1}),p(l,{onClick:a=>(e=>{N.push({name:"editVehicleModel",query:{id:e.row.id}})})(e),link:"",type:"primary"},{default:d((()=>[h("编辑")])),_:2},1032,["onClick"]),p(l,{link:"",type:"danger",onClick:a=>(e=>{v({id:e.row.id}).then((e=>{const{rspCode:a,rspMsg:l}=e;1==a&&(y({type:"success",message:l}),O())}))})(e)},{default:d((()=>[h("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),r("div",P,[p(t,{background:"",layout:c(j).layout,"page-sizes":c(j).pageSizes,total:c(j).total,"page-size":c(j).pageSize,currentPage:c(j).currentPage,onSizeChange:c(I),onCurrentChange:c(x)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})])])}}};export{V as default};
