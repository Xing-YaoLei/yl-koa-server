import{u as e,_ as l,b as a}from"./usePagination.bd041eb4.js";import{r as o,_ as r,a as p,ab as d,P as t,U as i,ac as s,m as u,e as n,ad as c,o as m,f as v,h as b,w as h,ae as f,j as g,V as S,i as C,af as V,ag as y,B as _,ah as k,ai as w,x,F as I,n as T,aj as q,E as z,ak as D,al as R,am as N,C as P,J as U,K as L}from"./index.7c4629cc.js";const B=o({formItems:[{field:"model",label:"型号:",placeholder:"请选择型号",type:"cascader",options:[]},{field:"sn",type:"input",label:"SN:",placeholder:"请输入SN码"},{field:"sim",type:"input",label:"SIM卡号:",placeholder:"请输入SIM卡号"}]}),M=o([{prop:"modelList",label:"型号",isShow:!0},{prop:"sn",label:"SN",isShow:!0},{prop:"sim",label:"SIM卡号",isShow:!0},{prop:"bleSn",label:"BLE SN",isShow:!0},{prop:"productionTime",label:"出厂日期",isShow:!0},{prop:"iccid",label:"ICCID",isShow:!0},{prop:"createDateTime",label:"创建日期",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),j=o([{prop:"model",label:"类型:",isRequired:!0,placeholder:"请选择类型",options:[]},{prop:"sn",label:"SN:",isRequired:!0,placeholder:"请输入SN"},{prop:"port",label:"Port:",isRequired:!1,placeholder:"请输入Port"},{prop:"ip",label:"IP:",isRequired:!1,placeholder:"请输入IP"},{prop:"sim",label:"SIM卡号:",isRequired:!1,placeholder:"请输入SIM卡号"},{prop:"bleSn",label:"BLE SN:",isRequired:!0,placeholder:"请输入选择BLE SN"},{prop:"softwareVersion",label:"软件版本号:",isRequired:!1,placeholder:"请输入软件版本号"},{prop:"hardwareVersion",label:"硬件版本号:",isRequired:!1,placeholder:"请输入硬件版本号"},{prop:"productionTime",label:"出厂日期:",isRequired:!1,placeholder:"请选择日期",isDateTime:!0},{prop:"iccid",label:"ICCID:",isRequired:!0,placeholder:"请输入ICCID"},{prop:"isActive",label:"是否激活:",isRequired:!0,placeholder:"请选择",options:[{label:"已激活",value:1},{label:"未激活",value:0}]}]),E={class:"app-container"},H={class:"pager-wrapper"},O=(e=>(U("data-v-bc5b7631"),e=e(),L(),e))((()=>x("div",{class:"addTboxHeader"},[x("div",{class:"addTboxHeaderTitle"},"添加TBOX")],-1))),Y={class:"twoLine"},F={class:"addTboxDialogHandle"},J=r({__name:"index",setup(o){var r;const U=p(),L=d(),{tboxModelList:J}=t(L),{paginationData:A,handleCurrentChange:K,handleSizeChange:W}=e(),X=p(!1),G=p("add"),Q=p([]),Z=p({}),$=p(!1),ee=p(),le=null!=(r=null==B?void 0:B.formItems)?r:[],ae={};le.map((e=>{ae[e.field]=""}));const oe=p(ae),re=()=>{var e;null==(e=ee.value)||e.resetForm(),de()},pe=()=>{if(oe.value.model){const{length:e,[e-1]:l}=oe.value.model;oe.value.model=l}de(oe.value)};i((()=>{var e;L.getTboxModelList(),null==(e=null==B?void 0:B.formItems)||e.map((e=>{"model"==e.field&&(e.options=J)})),null==j||j.map((e=>{"model"==e.prop&&(e.options=J)})),de()}));const de=e=>{X.value=!0,s({...e,pageNum:A.currentPage,pageSize:A.pageSize}).then((e=>{if(1==e.rspCode){X.value=!1;const{pageNum:l,total:a,data:o}=e.rspData;A.currentPage=l,A.total=a,Q.value=o}}))},te=()=>{const{length:e,[e-1]:l}=Z.value.model;Z.value.model=l,"add"==G.value?q(Z).then((e=>{1==e.rspCode&&(z.success("新增Tbox成功"),de())})):D(Z).then((e=>{1==e.rspCode&&(z.success("编辑Tbox信息成功"),de())})),$.value=!1},ie=()=>{var e;Z.value={},null==(e=U.value)||e.clearValidate(),G.value="add",$.value=!0},se=()=>{V((()=>{var e;null==(e=U.value)||e.clearValidate()}))};return u([()=>A.currentPage,()=>A.pageSize],de),(e,o)=>{const r=n("el-button"),p=n("el-pagination"),d=n("el-card"),t=n("el-option"),i=n("el-select"),s=n("el-cascader"),u=n("el-date-picker"),V=n("el-input"),q=n("el-form-item"),D=n("el-form"),L=n("el-dialog"),J=c("loading");return m(),v("div",E,[b(l,f(g(B),{modelValue:oe.value,"onUpdate:modelValue":o[0]||(o[0]=e=>oe.value=e),ref_key:"editForm",ref:ee}),{lastBtn:h((()=>[b(r,{type:"primary",icon:g(y),onClick:pe},{default:h((()=>[_("查询")])),_:1},8,["icon"]),b(r,{icon:g(k),onClick:re},{default:h((()=>[_("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),S((m(),C(d,null,{default:h((()=>[b(a,{tableData:Q.value,columnList:g(M)},{OtherHandle:h((()=>[b(r,{icon:g(w),type:"primary",onClick:ie},{default:h((()=>[_("新增")])),_:1},8,["icon"])])),handle:h((e=>[b(r,{type:"primary",text:"",size:"small",onClick:l=>{return a=e.row,$.value=!0,G.value="edit",void(Z.value=JSON.parse(JSON.stringify(a)));var a}},{default:h((()=>[_("编辑")])),_:2},1032,["onClick"]),b(r,{type:"danger",text:"",size:"small",onClick:l=>{return a=e.row,void R.confirm("您确定要删除么","Warning",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((()=>{N({id:a.id}).then((e=>{1==e.rspCode&&(z.success("删除成功"),de())}))}));var a}},{default:h((()=>[_("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),x("div",H,[b(p,{layout:g(A).layout,"page-sizes":g(A).pageSizes,total:g(A).total,"page-size":g(A).pageSize,currentPage:g(A).currentPage,onSizeChange:g(W),onCurrentChange:g(K)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[J,X.value]]),b(L,{center:"",modelValue:$.value,"onUpdate:modelValue":o[3]||(o[3]=e=>$.value=e),onClose:se,"show-close":!0},{header:h((({})=>[O])),footer:h((()=>[x("div",F,[b(r,{type:"default",onClick:o[2]||(o[2]=e=>$.value=!1)},{default:h((()=>[_("取消")])),_:1}),b(r,{type:"primary",onClick:te},{default:h((()=>[_("保存")])),_:1})])])),default:h((()=>[b(D,{"label-width":"90px",model:Z.value,ref_key:"tboxListRef",ref:U,modelValue:Z.value,"onUpdate:modelValue":o[1]||(o[1]=e=>Z.value=e)},{default:h((()=>[x("div",Y,[(m(!0),v(I,null,T(g(j),(e=>(m(),C(q,{key:e.prop,prop:e.prop,label:e.label,required:e.isRequired},{default:h((()=>[e.options&&"model"!==e.prop?(m(),C(i,{key:0,modelValue:Z.value[e.prop],"onUpdate:modelValue":l=>Z.value[e.prop]=l,placeholder:e.placeholder},{default:h((()=>[(m(!0),v(I,null,T(e.options,(e=>(m(),C(t,{key:e.label,label:e.label,value:e.value},null,8,["label","value"])))),128))])),_:2},1032,["modelValue","onUpdate:modelValue","placeholder"])):P("",!0),"model"==e.prop?(m(),C(s,{key:1,modelValue:Z.value[e.prop],"onUpdate:modelValue":l=>Z.value[e.prop]=l,options:e.options},null,8,["modelValue","onUpdate:modelValue","options"])):P("",!0),e.isDateTime?(m(),C(u,{key:2,modelValue:Z.value[e.prop],"onUpdate:modelValue":l=>Z.value[e.prop]=l,format:"YYYY/MM/DD","value-format":"x",type:"date",placeholder:"请选择日期"},null,8,["modelValue","onUpdate:modelValue"])):P("",!0),e.options||e.isDateTime?P("",!0):(m(),C(V,{key:3,modelValue:Z.value[e.prop],"onUpdate:modelValue":l=>Z.value[e.prop]=l,placeholder:e.placeholder},null,8,["modelValue","onUpdate:modelValue","placeholder"]))])),_:2},1032,["prop","label","required"])))),128))])])),_:1},8,["model","modelValue"])])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-bc5b7631"]]);export{J as default};
