import{g as e,a,e as l,d as t}from"./fleet.32b65d60.js";import{u as o,_ as n,b as d}from"./usePagination.21c10505.js";import{r as u,_ as r,a as i,U as s,e as p,ad as c,o as m,f as h,h as f,w as g,ae as v,j as b,V as _,i as y,af as C,B as V,ag as w,ah as z,x as S,E as k,J as x,K as D}from"./index.da4b159e.js";const P={formItems:[{field:"name",type:"input",label:"车队名称:",placeholder:"请输入公司名称"},{field:"contact",type:"input",label:"车队联系人:",placeholder:"请输入车队联系人"},{field:"phone",type:"input",label:"车队电话:",placeholder:"请输入公司名称"}]},U=u([{prop:"name",label:"车队名称",isShow:!0},{prop:"contact",label:"车队联系人",isShow:!0},{prop:"phone",label:"联系电话",isShow:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),j={class:"app-container"},q={class:"pager-wrapper"},B=(e=>(x("data-v-cb339c8d"),e=e(),D(),e))((()=>S("div",{class:"addFleetTitle"},"新增车队",-1))),F=r({__name:"index",setup(r){var x;const D=i(!1),{paginationData:F,handleCurrentChange:I,handleSizeChange:L}=o(),N=i(),O=i("add"),E=u({}),H=i(!1),J=i([]),K=null!=(x=null==P?void 0:P.formItems)?x:[],T={};K.map((e=>{T[e.field]=""})),s((()=>{A({})}));const A=async a=>{D.value=!0,await e({...a,pageNum:F.currentPage,pageSize:F.pageSize}).then((e=>{D.value=!1;const{pageNum:a,total:l,data:t}=e.rspData;F.currentPage=a,F.total=l,J.value=t}))},G=i(T),M=()=>{var e;null==(e=N.value)||e.resetForm(),A()},Q=()=>{A(G.value)},R=()=>{"add"==O.value?a(E).then((e=>{H.value=!1,A()})):l(E).then((e=>{}))};return(e,a)=>{const l=p("el-button"),o=p("el-pagination"),u=p("el-card"),r=p("el-input"),i=p("el-form-item"),s=p("el-form"),x=p("el-dialog"),K=c("loading");return m(),h("div",j,[f(n,v(b(P),{modelValue:G.value,"onUpdate:modelValue":a[0]||(a[0]=e=>G.value=e),ref_key:"editForm",ref:N}),{lastBtn:g((()=>[f(l,{type:"primary",icon:b(C),onClick:Q},{default:g((()=>[V("查询")])),_:1},8,["icon"]),f(l,{icon:b(w),onClick:M},{default:g((()=>[V("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),_((m(),y(u,null,{default:g((()=>[f(d,{tableData:J.value,columnList:b(U)},{OtherHandle:g((()=>[f(l,{type:"primary",icon:b(z),onClick:a[1]||(a[1]=e=>H.value=!0)},{default:g((()=>[V("新增")])),_:1},8,["icon"])])),handle:g((e=>[f(l,{type:"primary",text:"",size:"small",onClick:a=>{return l=e.row,O.value="edit",Object.assign(E,l),void(H.value=!0);var l}},{default:g((()=>[V("编辑")])),_:2},1032,["onClick"]),f(l,{type:"danger",text:"",size:"small",onClick:a=>{return l=e.row,void t(l.id).then((e=>{1==e.rspCode&&k.success("删除成功")}));var l}},{default:g((()=>[V("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),S("div",q,[f(o,{layout:b(F).layout,"page-sizes":b(F).pageSizes,total:b(F).total,"page-size":b(F).pageSize,currentPage:b(F).currentPage,onSizeChange:b(L),onCurrentChange:b(I)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[K,D.value]]),f(x,{modelValue:H.value,"onUpdate:modelValue":a[6]||(a[6]=e=>H.value=e),width:"30%","show-close":!1},{header:g((()=>[B])),footer:g((()=>[f(l,{type:"default",onClick:a[5]||(a[5]=e=>H.value=!1)},{default:g((()=>[V("取消")])),_:1}),f(l,{type:"primary",onClick:R},{default:g((()=>[V("保存")])),_:1})])),default:g((()=>[f(s,{"label-width":"100px",class:"fleetDialog"},{default:g((()=>[f(i,{required:"",label:"车队名称:"},{default:g((()=>[f(r,{modelValue:E.name,"onUpdate:modelValue":a[2]||(a[2]=e=>E.name=e),placeholder:"请输入车队名称"},null,8,["modelValue"])])),_:1}),f(i,{required:"",label:"车队联系人:"},{default:g((()=>[f(r,{modelValue:E.contact,"onUpdate:modelValue":a[3]||(a[3]=e=>E.contact=e),placeholder:"请输入联系人"},null,8,["modelValue"])])),_:1}),f(i,{required:"",label:"车队电话:"},{default:g((()=>[f(r,{modelValue:E.phone,"onUpdate:modelValue":a[4]||(a[4]=e=>E.phone=e),placeholder:"请输入车队电话"},null,8,["modelValue"])])),_:1})])),_:1})])),_:1},8,["modelValue"])])}}},[["__scopeId","data-v-cb339c8d"]]);export{F as default};
