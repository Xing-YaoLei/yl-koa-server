import{r as a,_ as e,U as l,l as t,a as r,m as n,e as o,ad as s,o as i,f as u,V as p,i as d,w as c,ae as m,j as g,h,B as f,af as v,ag as y,ah as C,x as z,E as _}from"./index.699c616b.js";import{a as S,d as b}from"./roles.3817d6ca.js";import{u as w,_ as k,b as x}from"./usePagination.a707d11f.js";const P={formItems:[{field:"name",label:"角色名称:",placeholder:"请输入角色名称",type:"input"}]},D=a([{prop:"name",label:"角色名称",isShow:!0},{prop:"description",label:"角色描述",isShow:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),j={class:"app-container"},V={class:"pager-wrapper"},B=e({__name:"index",setup(a){var e;const{paginationData:B,handleCurrentChange:I,handleSizeChange:R}=w();l((()=>{Q()}));const F=t(),L=r([]),U=r(!1),q=r(),E=null!=(e=null==P?void 0:P.formItems)?e:[],H={};E.map((a=>{H[a.field]=""}));const M=r(H),N=()=>{var a;null==(a=q.value)||a.resetForm(),Q()},O=()=>{Q(M.value)},Q=a=>{U.value=!0,S({...a,pageNum:B.currentPage,pageSize:B.pageSize}).then((a=>{L.value=a.rspData.fuzzyQuerySysRoles})).catch((a=>{a&&(U.value=!1)})).finally((()=>{U.value=!1}))};return n([()=>B.currentPage,()=>B.pageSize],Q),(a,e)=>{const l=o("el-button"),t=o("el-pagination"),r=o("el-card"),n=s("loading");return i(),u("div",j,[p((i(),d(k,m(g(P),{modelValue:M.value,"onUpdate:modelValue":e[0]||(e[0]=a=>M.value=a),ref_key:"editForm",ref:q}),{lastBtn:c((()=>[h(l,{type:"primary",icon:g(v),onClick:O},{default:c((()=>[f("查询")])),_:1},8,["icon"]),h(l,{icon:g(y),onClick:N},{default:c((()=>[f("重置")])),_:1},8,["icon"])])),_:1},16,["modelValue"])),[[n,U.value]]),p((i(),d(r,null,{default:c((()=>[h(x,{tableData:L.value,columnList:g(D)},{OtherHandle:c((()=>[h(l,{icon:g(C),type:"primary",onClick:e[1]||(e[1]=e=>a.$router.push({name:"addRole"}))},{default:c((()=>[f("新增")])),_:1},8,["icon"])])),handle:c((a=>[h(l,{type:"primary",text:"",size:"small",onClick:e=>{return l=a.row,void F.push({name:"addRole",query:{id:l.id,name:l.name,pid:l.pid,description:l.description}});var l}},{default:c((()=>[f("编辑")])),_:2},1032,["onClick"]),h(l,{type:"danger",text:"",size:"small",onClick:e=>{return l=a.row,void b({id:l.id}).then((a=>{1==a.rspCode?(_.success("删除成功"),Q()):_.error(a.errorMsg)}));var l}},{default:c((()=>[f("删除")])),_:2},1032,["onClick"])])),_:1},8,["tableData","columnList"]),z("div",V,[h(t,{layout:g(B).layout,"page-sizes":g(B).pageSizes,total:g(B).total,"page-size":g(B).pageSize,currentPage:g(B).currentPage,onSizeChange:g(R),onCurrentChange:g(I)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})),[[n,U.value]])])}}},[["__scopeId","data-v-8ea18d50"]]);export{B as default};
