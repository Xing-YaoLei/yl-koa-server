import{u as e,_ as a,b as l}from"./usePagination.d50a23b4.js";import{r as t,ak as o,P as i,a as s,l as n,U as p,m as r,e as u,o as d,f as c,h as m,w as f,ae as h,j as g,al as v,af as b,B as y,ag as S,ah as C,t as w,x as _,am as z,an as k,E as T}from"./index.3ccc0506.js";import{g as N}from"./fleet.2e82f209.js";import{f as P}from"./index.8a0e2b52.js";const D={formItems:[{field:"modelName",type:"cascader",label:"车型:",placeholder:"请输入车型",options:[]},{field:"plateNo",type:"input",label:"车牌号:",placeholder:"请输入车牌号"},{field:"fleet",type:"select",label:"所属车队:",placeholder:"请选择车队",options:[]},{field:"vin",type:"input",label:"车辆识别码(VIN):",placeholder:"请输入"},{field:"fuelType",type:"select",label:"能源类型:",placeholder:"请选择能源类型",options:[]},{field:"status",type:"select",label:"车辆状态:",placeholder:"请选择车辆状态",options:[]},{field:"purchaseTime",label:"购车时间:",placeholder:"购车时间",type:"datepicker",otherOptions:{startPlaceholder:"开始时间",endPlaceholder:"结束时间",type:"daterange"}}]},V=t([{prop:"plateNo",label:"车牌号码",isShow:!0},{prop:"fleet",label:"车队",isShow:!0},{prop:"modelName",label:"车型",isShow:!0},{prop:"bindTbox",label:"是否绑定TBOX",isShow:!0},{prop:"fuelType",label:"能源类型",isShow:!0,custom:!0},{prop:"vin",label:"车辆识别码(VIN)",isShow:!0},{prop:"status",label:"车辆状态",isShow:!0,custom:!0},{prop:"createDatetime",label:"创建时间",isShow:!0},{prop:"createBy",label:"创建人",isShow:!0},{prop:"handle",label:"操作",isShow:!0,custom:!0}]),x={class:"app-container"},j={class:"pager-wrapper"},B={__name:"index",setup(t){var B;const{paginationData:I,handleCurrentChange:O,handleSizeChange:L}=e(),E=o(),{modelOptions:F}=i(E),M=s([]),U=s(),q=null!=(B=null==D?void 0:D.formItems)?B:[],A={},H=s([{value:1,label:"待入库"},{value:2,label:"入库完成"},{value:3,label:"整备完成"}]),X=s(),G=s({1:"待入库",2:"入库完成",3:"整备完成"});q.map((e=>{A[e.field]=""}));const J=s(A),K=()=>{var e;null==(e=U.value)||e.resetForm()},Q=()=>{Y()},R=n(),W=()=>{R.push({name:"addVehicle"})},Y=()=>{J.value&&(J.value.purchaseTimeBegin=J.value.purchaseTime[0],J.value.purchaseTimeEnd=J.value.purchaseTime[1]),z({...J.value,pageNum:I.currentPage,pageSize:I.pageSize}).then((e=>{const{pageNum:a,total:l,list:t}=e.rspData;I.currentPage=a,I.total=l,M.value=t}))};return p((()=>{var e;N({pageSize:100}).then((e=>{q.filter((e=>"fleet"===e.field))[0].options=P(null==e?void 0:e.rspData.data)})),q.filter((e=>"status"===e.field))[0].options=H.value,E.getListModelMenuApi(),null==(e=null==D?void 0:D.formItems)||e.map((e=>{"modelName"==e.field&&(e.options=F.value)})),v().then((e=>{const a={};X.value=null==e?void 0:e.rspData.map((e=>{a[e.id]=e.name})),X.value=a,q.filter((e=>"fuelType"===e.field))[0].options=P(null==e?void 0:e.rspData)}))})),r([()=>I.currentPage,()=>I.pageSize],Y,{immediate:!0}),(e,t)=>{const o=u("el-button"),i=u("el-popconfirm"),s=u("el-pagination"),n=u("el-card");return d(),c("div",x,[m(a,h(g(D),{modelValue:J.value,"onUpdate:modelValue":t[0]||(t[0]=e=>J.value=e),ref_key:"editForm",ref:U}),{lastBtn:f((()=>[m(o,{type:"primary",icon:g(b),onClick:Q},{default:f((()=>[y("查询")])),_:1},8,["icon"]),m(o,{icon:g(S),onClick:K},{default:f((()=>[y("导入")])),_:1},8,["icon"]),m(o,{icon:g(S),onClick:K},{default:f((()=>[y("下载模版")])),_:1},8,["icon"])])),_:1},16,["modelValue"]),m(n,null,{default:f((()=>[m(l,{tableData:M.value,columnList:g(V)},{OtherHandle:f((()=>[m(o,{type:"primary",icon:g(C),onClick:W},{default:f((()=>[y("新增")])),_:1},8,["icon"])])),fuelType:f((e=>[y(w(X.value[Number(e.row.fuelType)]),1)])),status:f((e=>[y(w(G.value[e.row.status]),1)])),handle:f((e=>[m(o,{type:"primary",link:"",onClick:a=>(e=>{R.push({name:"addVehicle",query:{id:e.row.id}})})(e)},{default:f((()=>[y("编辑")])),_:2},1032,["onClick"]),m(i,{title:"确定删除?",onConfirm:a=>(e=>{k({id:e.row.id}).then((e=>{const{rspData:a}=e;Y(),T({type:"success",message:a})}))})(e)},{reference:f((()=>[m(o,{type:"danger",link:""},{default:f((()=>[y("删除")])),_:1})])),_:2},1032,["onConfirm"])])),_:1},8,["tableData","columnList"]),_("div",j,[m(s,{background:"",layout:g(I).layout,"page-sizes":g(I).pageSizes,total:g(I).total,"page-size":g(I).pageSize,currentPage:g(I).currentPage,onSizeChange:g(L),onCurrentChange:g(O)},null,8,["layout","page-sizes","total","page-size","currentPage","onSizeChange","onCurrentChange"])])])),_:1})])}}};export{B as default};
